<h3>New Schedule</h3>
<section class="schedule_form">
<%= form_for([current_student, @scheduled_student], url:create_scheduled_students_path) do |form| %>
  <% if @scheduled_student.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@scheduled_student.errors.count, "error") %> prohibited this location from being saved:</h2>
      <ul>
        <% @scheduled_student.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

    <div class="actions">
      <%= form.submit "New schedule." %>
    </div>
  <div class="field">
    <%= form.label :description, "Please describe the topic you want to discuss with teacher." %>
    <%= text_area :schedule, :description %>
  </div>
  <div class="table">
    <% Teacher.all.each do |t| %>
      <% if t.locations.any? %>
        <h4>Teacher <%= t.name %></h4>
        <table>
          <thead>
          <tr>
            <th>Place</th>
            <th>Start Time</th>
            <th>Finish Time</th>
            <th>Weekday</th>
            <th>Need to queue?</th>
          </tr>
          </thead>
          <tbody>
          <% t.locations.each do |l| %>
              <tr class="locations">
                <td><%= l.place %></td>
                <td><%= l.start_time.to_formatted_s(format = :hm) %></td>
                <td><%= l.end_time.to_formatted_s(format = :hm) %></td>
                <td><%= l.weekday %></td>
                <% if l.schedules.any? %>
                  <td><%= "Yes, #{check_pending_num(l) + 1} people before you." %><td>
                <% else %>
                  <td>No</td>
                <% end %>
                <td><%= check_box("schedule[locations]", l.id) %></td>
              </tr>
          <% end %>
          </tbody>
        </table>
      <% end %>
    <% end %>
  </div>
  <div class="actions">
    <%= form.submit "New schedule." %>
  </div>
<% end %>
</section>
<!--<section class="scheduled_student">-->
  <%#= render 'schedule_form' %>
<!--</section>-->
